<Window x:Class="WpfApp1.view.UpdateStatusView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        mc:Ignorable="d"
        Title="Ürün Durumu Güncelle" 
        Height="500" 
        Width="600"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        Background="#1A2E3B"
        Foreground="#D5CFF5"
        FontFamily="Montserrat">

    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter" />
        
        <ControlTemplate x:Key="ComboBoxToggleButton" TargetType="ToggleButton">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                    <ColumnDefinition Width="20"/>
                </Grid.ColumnDefinitions>
                <Border x:Name="Border"  
                        Grid.ColumnSpan="2"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}"
                        CornerRadius="2"/>
                <Path x:Name="Arrow"
                      Grid.Column="1"
                      Fill="#FFFFFF"
                      HorizontalAlignment="Center"
                      VerticalAlignment="Center"
                      Data="M0,0 L4,4 8,0 Z"/>
            </Grid>
        </ControlTemplate>

        <ControlTemplate x:Key="ComboBoxTemplate" TargetType="ComboBox">
            <Grid>
                <ToggleButton x:Name="ToggleButton"
                              Template="{StaticResource ComboBoxToggleButton}"
                              Grid.Column="2"
                              Focusable="false"
                              Background="#C9113752"
                              BorderBrush="#556677"
                              BorderThickness="{TemplateBinding BorderThickness}"
                              IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                              ClickMode="Press"/>
                <ContentPresenter x:Name="ContentSite"
                                  Content="{TemplateBinding SelectionBoxItem}"
                                  ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                  ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                                  Margin="6,2"
                                  VerticalAlignment="Center"
                                  HorizontalAlignment="Left"/>
                <Popup x:Name="Popup"
                       Placement="Bottom"
                       IsOpen="{TemplateBinding IsDropDownOpen}"
                       AllowsTransparency="True"
                       Focusable="False"
                       PopupAnimation="Slide">
                    <Border x:Name="DropDownBorder"
                            Background="#A1113752"
                            BorderThickness="1"
                            BorderBrush="#556677"
                            CornerRadius="4">
                        <ScrollViewer x:Name="DropDownScrollViewer">
                            <Grid RenderOptions.ClearTypeHint="Enabled">
                                <ItemsPresenter/>
                            </Grid>
                        </ScrollViewer>
                    </Border>
                </Popup>
            </Grid>
        </ControlTemplate>

        <ControlTemplate x:Key="ComboBoxItemTemplate" TargetType="ComboBoxItem">
            <Border Background="{TemplateBinding Background}"  
                    BorderBrush="{TemplateBinding BorderBrush}"  
                    BorderThickness="{TemplateBinding BorderThickness}"
                    Padding="6,2">
                <ContentPresenter/>
            </Border>
            <ControlTemplate.Triggers>
                <Trigger Property="IsHighlighted" Value="True">
                    <Setter Property="Background" Value="#1E474A"/>
                </Trigger>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="#0F3542"/>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>

        <Style TargetType="ComboBox">
            <Setter Property="Background" Value="#113752"/>
            <Setter Property="Foreground" Value="#D5CFF5"/>
            <Setter Property="BorderBrush" Value="#556677"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Template" Value="{StaticResource ComboBoxTemplate}"/>
            <Setter Property="Height" Value="32"/>
            <Setter Property="Margin" Value="0,5,0,10"/>
        </Style>

        <Style TargetType="ComboBoxItem">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#D5CFF5"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template" Value="{StaticResource ComboBoxItemTemplate}"/>
        </Style>

        <!-- Button Stilleri (Ana uygulamayla aynı) -->
        <Style x:Key="GlassButton" TargetType="Button">
            <Setter Property="Background" Value="#1E474A"/>
            <Setter Property="Foreground" Value="#089E97"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Padding" Value="12,6"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="4">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ActionButton" TargetType="Button" BasedOn="{StaticResource GlassButton}">
            <Setter Property="Background" Value="#113752"/>
            <Setter Property="Foreground" Value="#3DB3B3"/>
            <Setter Property="Width" Value="140"/>
            <Setter Property="Height" Value="36"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="FontWeight" Value="Bold"/>
        </Style>

        <Style x:Key="CancelButton" TargetType="Button" BasedOn="{StaticResource GlassButton}">
            <Setter Property="Background" Value="#1E474A"/>
            <Setter Property="Foreground" Value="#FF6B6B"/>
            <Setter Property="Width" Value="100"/>
        </Style>

        <!-- TextBlock Stilleri -->
        <Style TargetType="TextBlock">
            <Setter Property="Foreground" Value="#D5CFF5"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>

        <Style x:Key="SectionTitle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="#3DB3B3"/>
            <Setter Property="Margin" Value="0,0,0,15"/>
        </Style>

        <Style x:Key="LabelText" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#88A0D0"/>
            <Setter Property="Margin" Value="0,0,0,5"/>
        </Style>
    </Window.Resources>

    <Border Margin="15" Background="#1A2E3B" CornerRadius="8" BorderBrush="#556677" BorderThickness="1">
        <Grid Margin="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Başlık -->
            <TextBlock Grid.Row="0" 
                       Text="ÜRÜN DURUM YÖNETİMİ" 
                       Style="{StaticResource SectionTitle}"
                       HorizontalAlignment="Center"/>

            <!-- Durum Seçimi -->
            <StackPanel Grid.Row="1">
                <TextBlock Text="Yeni Durum:" Style="{StaticResource LabelText}"/>
                <ComboBox ItemsSource="{Binding StatusNames}"
                          SelectedItem="{Binding SelectedStatus, Mode=TwoWay}"
                          DisplayMemberPath="."/>
            </StackPanel>

            <!-- Personel Seçimi -->
            <StackPanel Grid.Row="2" Margin="0,15,0,0">
                <TextBlock Text="Personel Seçin:" Style="{StaticResource LabelText}"/>
                <ComboBox ItemsSource="{Binding Employees}"
                          SelectedItem="{Binding SelectedEmployee, Mode=TwoWay}"
                          DisplayMemberPath="FullName"/>
            </StackPanel>

            <StackPanel Grid.Row="3" Orientation="Horizontal" Margin="0,20,0,0" HorizontalAlignment="Center">
                <Button Content="DURUM GÜNCELLE" 
                        Style="{StaticResource ActionButton}"
                        Command="{Binding UpdateCommand}"
                        CommandParameter="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"/>
                
                <Button Content="ZİMMETLE" 
                        Style="{StaticResource ActionButton}"
                        Command="{Binding AssignCommand}"
                        Margin="20,0,0,0"/>
            </StackPanel>

            <!-- Bilgi Metni -->
            <TextBlock Grid.Row="4" 
                       Text="• Durum güncellemek için yukarıdan durum seçip 'Durum Güncelle' butonuna basın.&#x0a;• Zimmetlemek için personel seçip 'Zimmetle' butonuna basın.&#x0a;• Arızalı/Hurda ürünler zimmetlenirse durumu otomatik 'Mevcut' yapılır ve depodan çıkarılır."
                       Foreground="#88A0D0"
                       FontSize="12"
                       Margin="0,20,0,0"
                       TextWrapping="Wrap"/>

            <!-- Alt Butonlar -->
            <StackPanel Grid.Row="5" 
                        Orientation="Horizontal" 
                        HorizontalAlignment="Right"
                        Margin="0,20,0,0">
                <Button Content="İPTAL" 
                        Style="{StaticResource CancelButton}"
                        Command="{Binding CancelCommand}"
                        CommandParameter="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"/>
            </StackPanel>
        </Grid>
    </Border>

</Window>
